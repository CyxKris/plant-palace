import "./Header.css";

import { useRef } from "react";
import { Link } from "react-router-dom";
import { useShoppingCart } from "../context/ShoppingCartContext";

const Header = () => {
    const navRef = useRef();

    const toggleMenu = () => {
        navRef.current.classList.toggle("is-open");
        // For browsers that don't support the :has() selector
        document.body.classList.toggle("no-scroll");
    };

    const { cartQuantity } = useShoppingCart();

    return (
        <>
            <header>
                <nav className="header-content">
                    {/* MENU */}
                    <div
                        id="menu"
                        className="menu icon"
                        onClick={toggleMenu}
                    >
                        <svg
                            width="52"
                            height="37"
                            viewBox="0 0 52 37"
                            fill="none"
                        >
                            <path
                                className="menu-icon-path"
                                d="M3.7 0H22.2C23.1813 0 24.1224 0.38982 24.8163 1.0837C25.5102 1.77759 25.9 2.7187 25.9 3.7C25.9 4.6813 25.5102 5.62241 24.8163 6.3163C24.1224 7.01018 23.1813 7.4 22.2 7.4H3.7C2.7187 7.4 1.77759 7.01018 1.08371 6.3163C0.38982 5.62241 0 4.6813 0 3.7C0 2.7187 0.38982 1.77759 1.08371 1.0837C1.77759 0.38982 2.7187 0 3.7 0ZM29.6 29.6H48.1C49.0813 29.6 50.0224 29.9898 50.7163 30.6837C51.4102 31.3776 51.8 32.3187 51.8 33.3C51.8 34.2813 51.4102 35.2224 50.7163 35.9163C50.0224 36.6102 49.0813 37 48.1 37H29.6C28.6187 37 27.6776 36.6102 26.9837 35.9163C26.2898 35.2224 25.9 34.2813 25.9 33.3C25.9 32.3187 26.2898 31.3776 26.9837 30.6837C27.6776 29.9898 28.6187 29.6 29.6 29.6ZM3.7 14.8H48.1C49.0813 14.8 50.0224 15.1898 50.7163 15.8837C51.4102 16.5776 51.8 17.5187 51.8 18.5C51.8 19.4813 51.4102 20.4224 50.7163 21.1163C50.0224 21.8102 49.0813 22.2 48.1 22.2H3.7C2.7187 22.2 1.77759 21.8102 1.08371 21.1163C0.38982 20.4224 0 19.4813 0 18.5C0 17.5187 0.38982 16.5776 1.08371 15.8837C1.77759 15.1898 2.7187 14.8 3.7 14.8Z"
                            />
                        </svg>
                    </div>

                    {/* LOGO */}
                    <Link
                        to="/"
                        id="logo"
                        className="logo"
                    >
                        Plant<span>Planet</span>
                    </Link>

                    {/* CART */}
                    <Link
                        to="/cart"
                        id="cart"
                        className="cart icon"
                    >
                        <svg
                            width="39"
                            height="39"
                            viewBox="0 0 39 39"
                            fill="none"
                        >
                            <path
                                className="cart-icon-path"
                                d="M34.125 6.50001H3.25V9.75001H6.9875L12.7091 25.4849C12.9377 26.1113 13.3531 26.6525 13.8992 27.0352C14.4453 27.4179 15.0957 27.6238 15.7625 27.625H29.25V24.375H15.7625L14.5795 21.125H29.25C29.9 21.125 30.4882 20.7383 30.7434 20.1403L35.6184 8.76526C35.7252 8.51815 35.7688 8.24834 35.7453 7.98017C35.7218 7.71199 35.6319 7.45388 35.4837 7.22913C35.3356 7.00437 35.1338 6.82003 34.8966 6.69274C34.6594 6.56545 34.3942 6.49922 34.125 6.50001Z"
                            />
                            <path
                                className="cart-icon-path"
                                d="M17.0625 34.125C18.4087 34.125 19.5 33.0337 19.5 31.6875C19.5 30.3413 18.4087 29.25 17.0625 29.25C15.7163 29.25 14.625 30.3413 14.625 31.6875C14.625 33.0337 15.7163 34.125 17.0625 34.125Z"
                            />
                            <path
                                className="cart-icon-path"
                                d="M26.8125 34.125C28.1587 34.125 29.25 33.0337 29.25 31.6875C29.25 30.3413 28.1587 29.25 26.8125 29.25C25.4663 29.25 24.375 30.3413 24.375 31.6875C24.375 33.0337 25.4663 34.125 26.8125 34.125Z"
                            />
                        </svg>
                        <p className="cart-count">{cartQuantity}</p>
                    </Link>
                </nav>

                {/* ACTUAL MENU NAVIGATION */}
                <nav
                    className="menu-content"
                    ref={navRef}
                >
                    <div
                        className="close-menu icon"
                        onClick={toggleMenu}
                    >
                        <svg
                            width="56"
                            height="56"
                            viewBox="0 0 56 56"
                            fill="none"
                        >
                            <path
                                className="close-icon-path"
                                d="M45.4794 8.13249C44.8629 8.14704 44.2771 8.4051 43.8502 8.85026L28 24.7005L12.1497 8.85026C11.932 8.62647 11.6716 8.44864 11.3839 8.3273C11.0962 8.20597 10.7871 8.14359 10.4749 8.14388C10.0109 8.14446 9.55763 8.28333 9.17296 8.54277C8.78828 8.80221 8.48968 9.17043 8.3153 9.6004C8.14092 10.0304 8.09867 10.5026 8.19395 10.9567C8.28923 11.4107 8.51771 11.8261 8.85022 12.1497L24.7005 28L8.85022 43.8503C8.62628 44.0653 8.44749 44.3228 8.32433 44.6078C8.20116 44.8927 8.13609 45.1994 8.13293 45.5098C8.12977 45.8203 8.18859 46.1282 8.30593 46.4156C8.42327 46.703 8.59678 46.9641 8.8163 47.1837C9.03582 47.4032 9.29693 47.5767 9.58434 47.694C9.87176 47.8114 10.1797 47.8702 10.4901 47.867C10.8006 47.8639 11.1072 47.7988 11.3922 47.6756C11.6772 47.5525 11.9347 47.3737 12.1497 47.1497L28 31.2995L43.8502 47.1497C44.0652 47.3737 44.3227 47.5525 44.6077 47.6756C44.8927 47.7988 45.1994 47.8639 45.5098 47.867C45.8202 47.8702 46.1282 47.8114 46.4156 47.694C46.703 47.5767 46.9641 47.4032 47.1836 47.1837C47.4031 46.9641 47.5766 46.703 47.694 46.4156C47.8113 46.1282 47.8701 45.8203 47.867 45.5098C47.8638 45.1994 47.7988 44.8927 47.6756 44.6078C47.5524 44.3228 47.3736 44.0653 47.1497 43.8503L31.2994 28L47.1497 12.1497C47.4892 11.8242 47.7224 11.4036 47.8187 10.9431C47.915 10.4827 47.8699 10.0039 47.6893 9.56953C47.5087 9.13517 47.2011 8.76553 46.8067 8.50908C46.4124 8.25264 45.9497 8.12137 45.4794 8.13249Z"
                            />
                        </svg>
                    </div>
                    <ul>
                        <Link
                            to={"/"}
                            onClick={toggleMenu}
                        >
                            HOME
                        </Link>
                        <Link
                            to={"/shop"}
                            onClick={toggleMenu}
                        >
                            SHOP
                        </Link>
                        <Link
                            to={"/sitemap"}
                            onClick={toggleMenu}
                        >
                            SITEMAP
                        </Link>
                        <Link>CONTACT</Link>
                        <Link>FEEDBACK</Link>
                    </ul>
                </nav>
            </header>
        </>
    );
};
export default Header;
